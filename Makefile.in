.PHONY: all jar uberjar clean reallyclean run

MVN ?= mvn
RM ?= rm -f
MKDIR ?= mkdir -p
ECHO ?= @echo


all: jar
jar: target/@PKGNAME@.jar
uberjar: target/@PKGNAME@-jar-with-dependencies.jar

target/@PKGNAME@.jar:
	@echo Building @PKGNAME@
	$(MVN) package

target/@PKGNAME@-jar-with-dependencies.jar:
	$(MVN) assembly:single -DdescriptorId=jar-with-dependencies

run: target/@PKGNAME@.jar
	/bin/sh target/bin/webapp

clean:
	$(RM) -r target

reallyclean: clean
	$(RM) config.log config.status pom.xml
	$(ECHO) "You'll have to run ./configure again."
